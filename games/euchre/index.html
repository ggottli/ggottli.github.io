<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Euchre Simulator</title>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <div class="container">
            <header class="py-16">
                <h1>Euchre Simulator</h1>
                <p class="color-text-secondary">
                    Run customizable simulations of 4-player partnership Euchre
                </p>
            </header>

            <div class="simulator-layout">
                <!-- Control Panel -->
                <div class="control-panel">
                    <div class="card">
                        <div class="card__header">
                            <h3>Simulation Settings</h3>
                        </div>
                        <div class="card__body">
                            <!-- Mode Selection -->
                            <div class="form-group">
                                <label class="form-label"
                                    >Simulation Mode</label
                                >
                                <div class="radio-group">
                                    <label class="radio-label">
                                        <input
                                            type="radio"
                                            name="mode"
                                            value="batch"
                                            checked
                                        />
                                        Batch/Stats Mode
                                    </label>
                                    <label class="radio-label">
                                        <input
                                            type="radio"
                                            name="mode"
                                            value="step"
                                        />
                                        Step-by-Step Mode
                                    </label>
                                </div>
                            </div>

                            <!-- Batch Settings -->
                            <div id="batch-settings" class="batch-settings">
                                <div class="form-group">
                                    <label
                                        class="form-label"
                                        for="num-simulations"
                                        >Number of Simulations</label
                                    >
                                    <input
                                        type="number"
                                        id="num-simulations"
                                        class="form-control"
                                        value="10000"
                                        min="1"
                                        max="1000000"
                                    />
                                </div>
                            </div>

                            <!-- Player Settings -->
                            <div class="form-group">
                                <label class="form-label"
                                    >Player Settings</label
                                >
                                <div class="player-settings">
                                    <div class="player-row" data-seat="1">
                                        <div class="player-info">
                                            <label>Seat 1 (North)</label>
                                            <input
                                                type="text"
                                                class="player-name"
                                                value="Player 1"
                                                placeholder="Player Name"
                                            />
                                        </div>
                                        <div class="player-strategy-settings">
                                            <div class="strategy-group">
                                                <h5>Bidding Strategy</h5>
                                                <div class="form-group-inline">
                                                    <label
                                                        >R1 Call Threshold:
                                                        <input
                                                            type="number"
                                                            class="bidding-threshold-r1"
                                                            value="48"
                                                            min="20"
                                                            max="80"
                                                            title="Hand score needed to order up the dealer."
                                                    /></label>
                                                    <label
                                                        >R2 Call Threshold:
                                                        <input
                                                            type="number"
                                                            class="bidding-threshold-r2"
                                                            value="40"
                                                            min="20"
                                                            max="80"
                                                            title="Hand score needed to call a new suit."
                                                    /></label>
                                                </div>
                                                <div class="form-group-inline">
                                                    <label
                                                        >Loner Threshold:
                                                        <input
                                                            type="number"
                                                            class="loner-threshold"
                                                            value="75"
                                                            min="50"
                                                            max="100"
                                                            title="Hand score needed to attempt going alone."
                                                    /></label>
                                                </div>
                                            </div>
                                            <div class="strategy-group">
                                                <h5>Playing Strategy</h5>
                                                <div class="form-group-inline">
                                                    <label
                                                        >Lead Style:
                                                        <select
                                                            class="lead-style"
                                                            title="The AI's preferred card to lead a trick with."
                                                        >
                                                            <option
                                                                value="balanced"
                                                                selected
                                                            >
                                                                Balanced
                                                            </option>
                                                            <option
                                                                value="trump_heavy"
                                                            >
                                                                Lead Trump
                                                            </option>
                                                            <option
                                                                value="off_suit_first"
                                                            >
                                                                Lead Off-Suit
                                                            </option>
                                                        </select>
                                                    </label>
                                                    <label
                                                        ><input
                                                            type="checkbox"
                                                            class="protect-partner"
                                                            checked
                                                            title="If checked, AI will avoid trumping a trick its partner is likely to win."
                                                        />
                                                        Protect Partner</label
                                                    >
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="player-row" data-seat="2">
                                        <div class="player-info">
                                            <label>Seat 2 (East)</label>
                                            <input
                                                type="text"
                                                class="player-name"
                                                value="Player 2"
                                                placeholder="Player Name"
                                            />
                                        </div>
                                        <div class="player-strategy-settings">
                                            <div class="strategy-group">
                                                <h5>Bidding Strategy</h5>
                                                <div class="form-group-inline">
                                                    <label
                                                        >R1 Call Threshold:
                                                        <input
                                                            type="number"
                                                            class="bidding-threshold-r1"
                                                            value="48"
                                                            min="20"
                                                            max="80"
                                                            title="Hand score needed to order up the dealer."
                                                    /></label>
                                                    <label
                                                        >R2 Call Threshold:
                                                        <input
                                                            type="number"
                                                            class="bidding-threshold-r2"
                                                            value="40"
                                                            min="20"
                                                            max="80"
                                                            title="Hand score needed to call a new suit."
                                                    /></label>
                                                </div>
                                                <div class="form-group-inline">
                                                    <label
                                                        >Loner Threshold:
                                                        <input
                                                            type="number"
                                                            class="loner-threshold"
                                                            value="75"
                                                            min="50"
                                                            max="100"
                                                            title="Hand score needed to attempt going alone."
                                                    /></label>
                                                </div>
                                            </div>
                                            <div class="strategy-group">
                                                <h5>Playing Strategy</h5>
                                                <div class="form-group-inline">
                                                    <label
                                                        >Lead Style:
                                                        <select
                                                            class="lead-style"
                                                            title="The AI's preferred card to lead a trick with."
                                                        >
                                                            <option
                                                                value="balanced"
                                                                selected
                                                            >
                                                                Balanced
                                                            </option>
                                                            <option
                                                                value="trump_heavy"
                                                            >
                                                                Lead Trump
                                                            </option>
                                                            <option
                                                                value="off_suit_first"
                                                            >
                                                                Lead Off-Suit
                                                            </option>
                                                        </select>
                                                    </label>
                                                    <label
                                                        ><input
                                                            type="checkbox"
                                                            class="protect-partner"
                                                            checked
                                                            title="If checked, AI will avoid trumping a trick its partner is likely to win."
                                                        />
                                                        Protect Partner</label
                                                    >
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="player-row" data-seat="3">
                                        <div class="player-info">
                                            <label>Seat 3 (South)</label>
                                            <input
                                                type="text"
                                                class="player-name"
                                                value="Player 3"
                                                placeholder="Player Name"
                                            />
                                        </div>
                                        <div class="player-strategy-settings">
                                            <div class="strategy-group">
                                                <h5>Bidding Strategy</h5>
                                                <div class="form-group-inline">
                                                    <label
                                                        >R1 Call Threshold:
                                                        <input
                                                            type="number"
                                                            class="bidding-threshold-r1"
                                                            value="48"
                                                            min="20"
                                                            max="80"
                                                            title="Hand score needed to order up the dealer."
                                                    /></label>
                                                    <label
                                                        >R2 Call Threshold:
                                                        <input
                                                            type="number"
                                                            class="bidding-threshold-r2"
                                                            value="40"
                                                            min="20"
                                                            max="80"
                                                            title="Hand score needed to call a new suit."
                                                    /></label>
                                                </div>
                                                <div class="form-group-inline">
                                                    <label
                                                        >Loner Threshold:
                                                        <input
                                                            type="number"
                                                            class="loner-threshold"
                                                            value="75"
                                                            min="50"
                                                            max="100"
                                                            title="Hand score needed to attempt going alone."
                                                    /></label>
                                                </div>
                                            </div>
                                            <div class="strategy-group">
                                                <h5>Playing Strategy</h5>
                                                <div class="form-group-inline">
                                                    <label
                                                        >Lead Style:
                                                        <select
                                                            class="lead-style"
                                                            title="The AI's preferred card to lead a trick with."
                                                        >
                                                            <option
                                                                value="balanced"
                                                                selected
                                                            >
                                                                Balanced
                                                            </option>
                                                            <option
                                                                value="trump_heavy"
                                                            >
                                                                Lead Trump
                                                            </option>
                                                            <option
                                                                value="off_suit_first"
                                                            >
                                                                Lead Off-Suit
                                                            </option>
                                                        </select>
                                                    </label>
                                                    <label
                                                        ><input
                                                            type="checkbox"
                                                            class="protect-partner"
                                                            checked
                                                            title="If checked, AI will avoid trumping a trick its partner is likely to win."
                                                        />
                                                        Protect Partner</label
                                                    >
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="player-row" data-seat="4">
                                        <div class="player-info">
                                            <label>Seat 4 (West)</label>
                                            <input
                                                type="text"
                                                class="player-name"
                                                value="Player 4"
                                                placeholder="Player Name"
                                            />
                                        </div>
                                        <div class="player-strategy-settings">
                                            <div class="strategy-group">
                                                <h5>Bidding Strategy</h5>
                                                <div class="form-group-inline">
                                                    <label
                                                        >R1 Call Threshold:
                                                        <input
                                                            type="number"
                                                            class="bidding-threshold-r1"
                                                            value="48"
                                                            min="20"
                                                            max="80"
                                                            title="Hand score needed to order up the dealer."
                                                    /></label>
                                                    <label
                                                        >R2 Call Threshold:
                                                        <input
                                                            type="number"
                                                            class="bidding-threshold-r2"
                                                            value="40"
                                                            min="20"
                                                            max="80"
                                                            title="Hand score needed to call a new suit."
                                                    /></label>
                                                </div>
                                                <div class="form-group-inline">
                                                    <label
                                                        >Loner Threshold:
                                                        <input
                                                            type="number"
                                                            class="loner-threshold"
                                                            value="75"
                                                            min="50"
                                                            max="100"
                                                            title="Hand score needed to attempt going alone."
                                                    /></label>
                                                </div>
                                            </div>
                                            <div class="strategy-group">
                                                <h5>Playing Strategy</h5>
                                                <div class="form-group-inline">
                                                    <label
                                                        >Lead Style:
                                                        <select
                                                            class="lead-style"
                                                            title="The AI's preferred card to lead a trick with."
                                                        >
                                                            <option
                                                                value="balanced"
                                                                selected
                                                            >
                                                                Balanced
                                                            </option>
                                                            <option
                                                                value="trump_heavy"
                                                            >
                                                                Lead Trump
                                                            </option>
                                                            <option
                                                                value="off_suit_first"
                                                            >
                                                                Lead Off-Suit
                                                            </option>
                                                        </select>
                                                    </label>
                                                    <label
                                                        ><input
                                                            type="checkbox"
                                                            class="protect-partner"
                                                            checked
                                                            title="If checked, AI will avoid trumping a trick its partner is likely to win."
                                                        />
                                                        Protect Partner</label
                                                    >
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Trump Card Setup -->
                            <div class="form-group">
                                <label class="form-label"
                                    >Trump Card Setup</label
                                >
                                <div class="trump-setup">
                                    <select
                                        id="upcard-selector"
                                        class="form-control"
                                    >
                                        <option value="random">
                                            Random Upcard
                                        </option>
                                    </select>
                                    <label class="checkbox-label">
                                        <input
                                            type="checkbox"
                                            id="stick-dealer"
                                        />
                                        Stick the Dealer
                                    </label>
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="action-buttons">
                                <button
                                    id="run-simulation"
                                    class="btn btn--primary"
                                >
                                    Run Simulation
                                </button>
                                <button
                                    id="deal-hand"
                                    class="btn btn--secondary hidden"
                                >
                                    Deal Hand
                                </button>
                                <button
                                    id="next-trick"
                                    class="btn btn--secondary hidden"
                                >
                                    Next Trick
                                </button>
                                <button
                                    id="reset-simulation"
                                    class="btn btn--outline"
                                >
                                    Reset
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Output Area -->
                <div class="output-area">
                    <div class="card">
                        <div class="card__header">
                            <h3>Results</h3>
                            <div id="progress-bar" class="progress-bar hidden">
                                <div class="progress-fill"></div>
                                <span class="progress-text">0%</span>
                            </div>
                        </div>
                        <div class="card__body">
                            <div id="batch-results" class="batch-results">
                                <div class="results-section">
                                    <h4>Team & Game Statistics</h4>
                                    <div class="stats-table">
                                        <table>
                                            <thead>
                                                <tr>
                                                    <th>Team</th>
                                                    <th>Win %</th>
                                                    <th>Avg. Hands/Game</th>
                                                </tr>
                                            </thead>
                                            <tbody id="team-stats"></tbody>
                                        </table>
                                    </div>
                                    <div class="stats-table mt-16">
                                        <table>
                                            <thead>
                                                <tr>
                                                    <th>Statistic</th>
                                                    <th>Value</th>
                                                    <th>Notes</th>
                                                </tr>
                                            </thead>
                                            <tbody id="game-stats"></tbody>
                                        </table>
                                    </div>
                                </div>

                                <div class="results-section">
                                    <h4>
                                        Player Bidding & Performance (Per Seat)
                                    </h4>
                                    <div class="stats-table">
                                        <table>
                                            <thead>
                                                <tr>
                                                    <th>Seat</th>
                                                    <th>Trump Call %</th>
                                                    <th>R1/R2 Calls</th>
                                                    <th>Maker Win %</th>
                                                    <th>Euchres For/Against</th>
                                                    <th>Loner Attempts</th>
                                                    <th>Loner Success %</th>
                                                </tr>
                                            </thead>
                                            <tbody id="player-stats"></tbody>
                                        </table>
                                    </div>
                                </div>

                                <div class="results-section">
                                    <h4>Card Power Analysis</h4>
                                    <div class="stats-table">
                                        <table>
                                            <thead>
                                                <tr>
                                                    <th>Card</th>
                                                    <th>
                                                        Trick Win Rate (TWR)
                                                    </th>
                                                    <th>
                                                        Trump Calling Influence
                                                        (TCI)
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody
                                                id="card-power-stats"
                                            ></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <div id="step-results" class="step-results hidden">
                                <div class="game-state">
                                    <div class="current-score">
                                        <h4>Score</h4>
                                        <div class="score-display">
                                            <span
                                                >Team 1&3:
                                                <span id="team1-score"
                                                    >0</span
                                                ></span
                                            >
                                            <span
                                                >Team 2&4:
                                                <span id="team2-score"
                                                    >0</span
                                                ></span
                                            >
                                        </div>
                                    </div>
                                    <div class="trump-display">
                                        <h4>
                                            Trump:
                                            <span id="trump-suit">-</span>
                                        </h4>
                                        <div class="upcard" id="upcard-display">
                                            -
                                        </div>
                                    </div>
                                </div>

                                <div class="game-table">
                                    <div class="player-hands">
                                        <div
                                            class="player-hand"
                                            id="player-1-sbs"
                                        >
                                            <h5>Player 1 (North)</h5>
                                            <div class="cards"></div>
                                        </div>
                                        <div
                                            class="player-hand"
                                            id="player-2-sbs"
                                        >
                                            <h5>Player 2 (East)</h5>
                                            <div class="cards"></div>
                                        </div>
                                        <div
                                            class="player-hand"
                                            id="player-3-sbs"
                                        >
                                            <h5>Player 3 (South)</h5>
                                            <div class="cards"></div>
                                        </div>
                                        <div
                                            class="player-hand"
                                            id="player-4-sbs"
                                        >
                                            <h5>Player 4 (West)</h5>
                                            <div class="cards"></div>
                                        </div>
                                    </div>

                                    <div class="trick-area">
                                        <h4>Current Trick</h4>
                                        <div
                                            class="trick-cards"
                                            id="trick-cards"
                                        ></div>
                                    </div>
                                </div>

                                <div class="insight-panel">
                                    <div class="game-log">
                                        <h4>Game Log</h4>
                                        <div class="log-content" id="game-log">
                                            <p>
                                                Set up your hand below or click
                                                "Deal Random Hand".
                                            </p>
                                        </div>
                                    </div>
                                    <div class="move-insight">
                                        <h4>
                                            Move Analysis
                                            <span
                                                id="insight-player-name"
                                            ></span>
                                        </h4>
                                        <div class="insight-table-container">
                                            <table>
                                                <thead>
                                                    <tr>
                                                        <th>Card</th>
                                                        <th>Trick Win Prob.</th>
                                                        <th>Notes</th>
                                                    </tr>
                                                </thead>
                                                <tbody
                                                    id="move-insights-table"
                                                ></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                                <div class="hand-setup-panel card">
                                    <div class="card__header">
                                        <h5>Hand Setup</h5>
                                        <button
                                            id="deal-random-sbs"
                                            class="btn btn--secondary btn--sm"
                                        >
                                            Deal Random Hand
                                        </button>
                                    </div>
                                    <div class="card__body">
                                        <div class="custom-hand-grid">
                                            <div class="form-group">
                                                <label class="form-label"
                                                    >Seat 1 Hand</label
                                                >
                                                <div
                                                    class="card-selectors"
                                                    id="custom-hand-1"
                                                ></div>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label"
                                                    >Seat 2 Hand</label
                                                >
                                                <div
                                                    class="card-selectors"
                                                    id="custom-hand-2"
                                                ></div>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label"
                                                    >Seat 3 Hand</label
                                                >
                                                <div
                                                    class="card-selectors"
                                                    id="custom-hand-3"
                                                ></div>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label"
                                                    >Seat 4 Hand</label
                                                >
                                                <div
                                                    class="card-selectors"
                                                    id="custom-hand-4"
                                                ></div>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label"
                                                    >Upcard</label
                                                >
                                                <select
                                                    id="custom-upcard"
                                                    class="form-control"
                                                ></select>
                                            </div>
                                        </div>
                                        <div class="action-buttons">
                                            <button
                                                id="start-custom-hand"
                                                class="btn btn--primary"
                                            >
                                                Start With This Hand
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="app.js"></script>
    </body>
</html>

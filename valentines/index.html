<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, user-scalable=no"
        />
        <title>Hey Sarah üíï</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Pacifico&display=swap"
            rel="stylesheet"
        />
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            :root {
                --pink-light: #fff0f3;
                --pink-soft: #ffccd5;
                --pink-medium: #ffb3c1;
                --pink-main: #ff8fa3;
                --pink-deep: #ff758f;
                --pink-dark: #c9184a;
                --white: #ffffff;
                --gray-light: #e8e8e8;
                --gray: #b0b0b0;
            }

            html,
            body {
                height: 100%;
                overflow: hidden;
            }

            body {
                font-family: "Nunito", sans-serif;
                background: linear-gradient(
                    145deg,
                    var(--pink-light) 0%,
                    var(--pink-soft) 50%,
                    var(--pink-medium) 100%
                );
                min-height: 100vh;
                min-height: 100dvh;
                display: flex;
                align-items: center;
                justify-content: center;
                position: relative;
                overflow: hidden;
            }

            /* Floating Hearts Background */
            .hearts-container {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                overflow: hidden;
                z-index: 0;
            }

            .floating-heart {
                position: absolute;
                opacity: 0.6;
                animation: floatUp linear infinite;
                font-size: 1.5rem;
            }

            @keyframes floatUp {
                0% {
                    transform: translateY(100vh) rotate(0deg) scale(1);
                    opacity: 0;
                }
                10% {
                    opacity: 0.6;
                }
                90% {
                    opacity: 0.6;
                }
                100% {
                    transform: translateY(-20vh) rotate(360deg) scale(0.8);
                    opacity: 0;
                }
            }

            /* Main Content */
            .main-container {
                position: relative;
                z-index: 10;
                text-align: center;
                padding: 2rem 1.5rem;
                max-width: 90vw;
                width: 100%;
                max-width: 500px;
            }

            /* Question Section */
            .question-section {
                animation: fadeInUp 1s ease-out;
            }

            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .greeting {
                font-family: "Pacifico", cursive;
                font-size: clamp(2.5rem, 10vw, 4rem);
                color: var(--pink-dark);
                margin-bottom: 0.5rem;
                text-shadow: 2px 2px 10px rgba(255, 117, 143, 0.3);
                animation: gentlePulse 3s ease-in-out infinite;
            }

            @keyframes gentlePulse {
                0%,
                100% {
                    transform: scale(1);
                }
                50% {
                    transform: scale(1.02);
                }
            }

            .question {
                font-size: clamp(1.3rem, 5vw, 1.8rem);
                font-weight: 700;
                color: var(--pink-dark);
                margin-bottom: 2.5rem;
                line-height: 1.4;
                animation: fadeInUp 1s ease-out 0.3s both;
            }

            .sparkle {
                display: inline-block;
                animation: sparkle 1.5s ease-in-out infinite;
            }

            @keyframes sparkle {
                0%,
                100% {
                    opacity: 1;
                    transform: scale(1);
                }
                50% {
                    opacity: 0.7;
                    transform: scale(1.2);
                }
            }

            /* Cute Bear/Character */
            .cute-character {
                font-size: clamp(4rem, 15vw, 7rem);
                margin-bottom: 1.5rem;
                animation: bounce 2s ease-in-out infinite;
            }

            @keyframes bounce {
                0%,
                100% {
                    transform: translateY(0);
                }
                50% {
                    transform: translateY(-10px);
                }
            }

            /* Buttons Container */
            .buttons-container {
                display: flex;
                flex-direction: column;
                gap: 1rem;
                align-items: center;
                justify-content: center;
                animation: fadeInUp 1s ease-out 0.6s both;
                min-height: 180px;
                position: relative;
            }

            @media (min-width: 480px) {
                .buttons-container {
                    flex-direction: row;
                    gap: 1.5rem;
                    min-height: auto;
                }
            }

            /* YES Button */
            .btn-yes {
                background: linear-gradient(
                    145deg,
                    var(--pink-main),
                    var(--pink-deep)
                );
                color: var(--white);
                border: none;
                padding: 1rem 2.5rem;
                font-family: "Nunito", sans-serif;
                font-size: clamp(1.2rem, 4vw, 1.5rem);
                font-weight: 800;
                border-radius: 50px;
                cursor: pointer;
                box-shadow:
                    0 6px 20px rgba(255, 117, 143, 0.4),
                    0 0 40px rgba(255, 143, 163, 0.2),
                    inset 0 2px 10px rgba(255, 255, 255, 0.3);
                transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                animation: glowPulse 2s ease-in-out infinite;
                position: relative;
                overflow: hidden;
                min-width: 150px;
            }

            .btn-yes::before {
                content: "";
                position: absolute;
                top: -50%;
                left: -50%;
                width: 200%;
                height: 200%;
                background: linear-gradient(
                    45deg,
                    transparent,
                    rgba(255, 255, 255, 0.3),
                    transparent
                );
                transform: rotate(45deg);
                animation: shimmer 3s ease-in-out infinite;
            }

            @keyframes shimmer {
                0% {
                    transform: translateX(-100%) rotate(45deg);
                }
                100% {
                    transform: translateX(100%) rotate(45deg);
                }
            }

            @keyframes glowPulse {
                0%,
                100% {
                    box-shadow:
                        0 6px 20px rgba(255, 117, 143, 0.4),
                        0 0 40px rgba(255, 143, 163, 0.2),
                        inset 0 2px 10px rgba(255, 255, 255, 0.3);
                }
                50% {
                    box-shadow:
                        0 6px 30px rgba(255, 117, 143, 0.6),
                        0 0 60px rgba(255, 143, 163, 0.4),
                        inset 0 2px 10px rgba(255, 255, 255, 0.3);
                }
            }

            .btn-yes:hover {
                transform: scale(1.08);
                box-shadow:
                    0 8px 30px rgba(255, 117, 143, 0.5),
                    0 0 50px rgba(255, 143, 163, 0.3),
                    inset 0 2px 10px rgba(255, 255, 255, 0.3);
            }

            .btn-yes:active {
                transform: scale(1.02);
            }

            /* NO Button */
            .btn-no {
                background: var(--gray-light);
                color: var(--gray);
                border: none;
                padding: 0.8rem 1.8rem;
                font-family: "Nunito", sans-serif;
                font-size: clamp(0.9rem, 3vw, 1rem);
                font-weight: 600;
                border-radius: 50px;
                cursor: pointer;
                transition: all 0.3s ease;
                position: relative;
                min-width: 120px;
            }

            .btn-no:hover {
                background: var(--gray);
                color: var(--white);
            }

            .btn-no.dodging {
                position: absolute;
                transition: all 0.2s ease;
            }

            /* Victory Screen */
            .victory-screen {
                display: none;
                text-align: center;
                animation: victoryPop 0.6s
                    cubic-bezier(0.175, 0.885, 0.32, 1.275);
            }

            .victory-screen.active {
                display: block;
            }

            .question-section.hidden {
                display: none;
            }

            @keyframes victoryPop {
                0% {
                    opacity: 0;
                    transform: scale(0.5);
                }
                50% {
                    transform: scale(1.1);
                }
                100% {
                    opacity: 1;
                    transform: scale(1);
                }
            }

            .victory-emoji {
                font-size: clamp(5rem, 20vw, 8rem);
                animation: victoryBounce 0.5s ease infinite alternate;
                margin-bottom: 1rem;
            }

            @keyframes victoryBounce {
                from {
                    transform: translateY(0) rotate(-5deg);
                }
                to {
                    transform: translateY(-15px) rotate(5deg);
                }
            }

            .victory-title {
                font-family: "Pacifico", cursive;
                font-size: clamp(2rem, 8vw, 3.5rem);
                color: var(--pink-dark);
                margin-bottom: 1rem;
                text-shadow: 2px 2px 10px rgba(255, 117, 143, 0.3);
            }

            .victory-message {
                font-size: clamp(1.1rem, 4vw, 1.4rem);
                color: var(--pink-dark);
                line-height: 1.6;
                max-width: 350px;
                margin: 0 auto;
                font-weight: 600;
            }

            .victory-hearts {
                margin-top: 2rem;
                font-size: 2rem;
                animation: heartPop 1s ease-in-out infinite;
            }

            @keyframes heartPop {
                0%,
                100% {
                    transform: scale(1);
                }
                50% {
                    transform: scale(1.2);
                }
            }

            /* Confetti Canvas */
            #confetti-canvas {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: 100;
            }

            /* Falling Hearts Rain */
            .hearts-rain {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: 50;
            }

            .hearts-rain.active {
                display: block;
            }

            .rain-heart {
                position: absolute;
                top: -50px;
                animation: rainFall linear forwards;
                font-size: 1.5rem;
            }

            @keyframes rainFall {
                to {
                    transform: translateY(110vh) rotate(360deg);
                }
            }

            /* Attempt counter - subtle and cute */
            .attempt-counter {
                position: fixed;
                bottom: 1rem;
                right: 1rem;
                font-size: 0.8rem;
                color: var(--pink-deep);
                opacity: 0;
                transition: opacity 0.3s ease;
                font-weight: 600;
            }

            .attempt-counter.visible {
                opacity: 0.7;
            }
        </style>
    </head>
    <body>
        <!-- Floating Hearts Background -->
        <div class="hearts-container" id="hearts-container"></div>

        <!-- Confetti Canvas -->
        <canvas id="confetti-canvas"></canvas>

        <!-- Hearts Rain (Victory) -->
        <div class="hearts-rain" id="hearts-rain"></div>

        <!-- Main Content -->
        <div class="main-container">
            <!-- Question Section -->
            <div class="question-section" id="question-section">
                <div class="cute-character">üß∏üíï</div>
                <h1 class="greeting">Hey Sarah...</h1>
                <p class="question">
                    <span class="sparkle">‚ú®</span>
                    Will you be my Valentine?
                    <span class="sparkle">‚ú®</span>
                </p>
                <div class="buttons-container" id="buttons-container">
                    <button class="btn-yes" id="btn-yes">YES! üíñ</button>
                    <button class="btn-no" id="btn-no">No</button>
                </div>
            </div>

            <!-- Victory Screen -->
            <div class="victory-screen" id="victory-screen">
                <div class="victory-emoji">ü•∞</div>
                <h1 class="victory-title">Yay!!!</h1>
                <p class="victory-message">
                    I knew you'd say yes! üíï
                    <br /><br />
                    You just made me the happiest person ever. Can't wait to
                    spend Valentine's Day with you!
                    <br /><br />
                    I love you, Sarah! ü•∞
                </p>
                <div class="victory-hearts">üíïüíñüíï</div>
            </div>
        </div>

        <!-- Attempt Counter -->
        <div class="attempt-counter" id="attempt-counter"></div>

        <script>
            // ===== Configuration =====
            const noButtonTexts = [
                "No",
                "Are you sure?",
                "Really really sure?",
                "Think again! ü•∫",
                "Wrong button, silly!",
                "Pretty please?",
                "I'll be so sad...",
                "Is your mouse broken?",
                "You're breaking my heart üíî",
                "*sad puppy eyes* ü•∫",
                "Okay fine, catch me!",
            ];

            const DODGE_START_CLICK = 10;

            // ===== State =====
            let noClickCount = 0;
            let isDodging = false;
            let yesScale = 1;

            // ===== Elements =====
            const btnYes = document.getElementById("btn-yes");
            const btnNo = document.getElementById("btn-no");
            const buttonsContainer =
                document.getElementById("buttons-container");
            const questionSection = document.getElementById("question-section");
            const victoryScreen = document.getElementById("victory-screen");
            const attemptCounter = document.getElementById("attempt-counter");
            const heartsRain = document.getElementById("hearts-rain");
            const confettiCanvas = document.getElementById("confetti-canvas");
            const ctx = confettiCanvas.getContext("2d");

            // ===== Floating Hearts Background =====
            function createFloatingHearts() {
                const container = document.getElementById("hearts-container");
                const hearts = ["üíï", "üíó", "üíñ", "üíì", "ü§ç", "üíò"];

                for (let i = 0; i < 15; i++) {
                    setTimeout(() => {
                        createHeart(container, hearts);
                    }, i * 800);
                }

                // Continuously add hearts
                setInterval(() => {
                    createHeart(container, hearts);
                }, 2000);
            }

            function createHeart(container, hearts) {
                const heart = document.createElement("div");
                heart.className = "floating-heart";
                heart.textContent =
                    hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.left = Math.random() * 100 + "vw";
                heart.style.animationDuration = 8 + Math.random() * 8 + "s";
                heart.style.fontSize = 1 + Math.random() * 1.5 + "rem";
                heart.style.opacity = 0.3 + Math.random() * 0.4;
                container.appendChild(heart);

                // Remove heart after animation
                setTimeout(() => {
                    heart.remove();
                }, 16000);
            }

            // ===== NO Button Logic =====
            btnNo.addEventListener("click", handleNoClick);

            // Touch support for dodging
            btnNo.addEventListener("touchstart", (e) => {
                if (isDodging) {
                    e.preventDefault();
                    handleNoClick();
                }
            });

            function handleNoClick() {
                noClickCount++;

                // Update button text
                const textIndex = Math.min(
                    noClickCount,
                    noButtonTexts.length - 1,
                );
                btnNo.textContent = noButtonTexts[textIndex];

                // Grow YES button
                yesScale += 0.12;
                btnYes.style.transform = `scale(${yesScale})`;

                // Show attempt counter after 3 clicks
                if (noClickCount >= 3) {
                    attemptCounter.classList.add("visible");
                    attemptCounter.textContent = `No attempts: ${noClickCount} üò¢`;
                }

                // Start dodging after threshold
                if (noClickCount >= DODGE_START_CLICK && !isDodging) {
                    isDodging = true;
                    btnNo.classList.add("dodging");
                    startDodging();
                }

                // Shake animation
                btnNo.style.animation = "none";
                btnNo.offsetHeight; // Trigger reflow
                btnNo.style.animation = "shake 0.3s ease";
            }

            function startDodging() {
                // Position randomly on screen (mobile-friendly)
                moveNoButton();
            }

            function moveNoButton() {
                if (!isDodging) return;

                const containerRect = buttonsContainer.getBoundingClientRect();
                const btnRect = btnNo.getBoundingClientRect();

                // Calculate safe boundaries (keep button on screen)
                const maxX = window.innerWidth - btnRect.width - 20;
                const maxY = window.innerHeight - btnRect.height - 80;

                const newX = 20 + Math.random() * (maxX - 40);
                const newY = 100 + Math.random() * (maxY - 150);

                btnNo.style.position = "fixed";
                btnNo.style.left = newX + "px";
                btnNo.style.top = newY + "px";
            }

            // Dodge on mouse approach (desktop)
            document.addEventListener("mousemove", (e) => {
                if (!isDodging) return;

                const btnRect = btnNo.getBoundingClientRect();
                const btnCenterX = btnRect.left + btnRect.width / 2;
                const btnCenterY = btnRect.top + btnRect.height / 2;

                const distance = Math.sqrt(
                    Math.pow(e.clientX - btnCenterX, 2) +
                        Math.pow(e.clientY - btnCenterY, 2),
                );

                if (distance < 100) {
                    moveNoButton();
                }
            });

            // Dodge on touch approach (mobile)
            document.addEventListener("touchmove", (e) => {
                if (!isDodging) return;

                const touch = e.touches[0];
                const btnRect = btnNo.getBoundingClientRect();
                const btnCenterX = btnRect.left + btnRect.width / 2;
                const btnCenterY = btnRect.top + btnRect.height / 2;

                const distance = Math.sqrt(
                    Math.pow(touch.clientX - btnCenterX, 2) +
                        Math.pow(touch.clientY - btnCenterY, 2),
                );

                if (distance < 80) {
                    moveNoButton();
                }
            });

            // ===== YES Button Logic =====
            btnYes.addEventListener("click", handleYesClick);

            function handleYesClick() {
                // Play celebration sound (if available)
                playYaySound();

                // Hide question, show victory
                questionSection.classList.add("hidden");
                victoryScreen.classList.add("active");

                // Start confetti
                startConfetti();

                // Start hearts rain
                startHeartsRain();

                // Hide attempt counter
                attemptCounter.classList.remove("visible");
            }

            // ===== Sound Effect =====
            function playYaySound() {
                try {
                    // Create a simple "yay" sound using Web Audio API
                    const audioContext = new (window.AudioContext ||
                        window.webkitAudioContext)();

                    // Play a cheerful ascending tone sequence
                    const notes = [523.25, 659.25, 783.99, 1046.5]; // C5, E5, G5, C6
                    notes.forEach((freq, i) => {
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();

                        oscillator.connect(gainNode);
                        gainNode.connect(audioContext.destination);

                        oscillator.frequency.value = freq;
                        oscillator.type = "sine";

                        gainNode.gain.setValueAtTime(
                            0.2,
                            audioContext.currentTime + i * 0.1,
                        );
                        gainNode.gain.exponentialDecayToValueAtTime = 0.01;
                        gainNode.gain.setValueAtTime(
                            0.01,
                            audioContext.currentTime + i * 0.1 + 0.2,
                        );

                        oscillator.start(audioContext.currentTime + i * 0.1);
                        oscillator.stop(
                            audioContext.currentTime + i * 0.1 + 0.2,
                        );
                    });
                } catch (e) {
                    // Sound not supported, continue silently
                }
            }

            // ===== Confetti =====
            let confettiPieces = [];
            let animationId;

            function startConfetti() {
                confettiCanvas.width = window.innerWidth;
                confettiCanvas.height = window.innerHeight;

                // Create confetti pieces
                const colors = [
                    "#ff8fa3",
                    "#ff758f",
                    "#ffb3c1",
                    "#ffd700",
                    "#ff69b4",
                    "#fff",
                ];

                for (let i = 0; i < 150; i++) {
                    confettiPieces.push({
                        x: Math.random() * confettiCanvas.width,
                        y:
                            Math.random() * confettiCanvas.height -
                            confettiCanvas.height,
                        size: Math.random() * 10 + 5,
                        color: colors[
                            Math.floor(Math.random() * colors.length)
                        ],
                        speedY: Math.random() * 3 + 2,
                        speedX: Math.random() * 4 - 2,
                        rotation: Math.random() * 360,
                        rotationSpeed: Math.random() * 10 - 5,
                        shape: Math.random() > 0.5 ? "circle" : "rect",
                    });
                }

                animateConfetti();
            }

            function animateConfetti() {
                ctx.clearRect(
                    0,
                    0,
                    confettiCanvas.width,
                    confettiCanvas.height,
                );

                confettiPieces.forEach((piece, index) => {
                    piece.y += piece.speedY;
                    piece.x += piece.speedX;
                    piece.rotation += piece.rotationSpeed;

                    ctx.save();
                    ctx.translate(piece.x, piece.y);
                    ctx.rotate((piece.rotation * Math.PI) / 180);
                    ctx.fillStyle = piece.color;

                    if (piece.shape === "circle") {
                        ctx.beginPath();
                        ctx.arc(0, 0, piece.size / 2, 0, Math.PI * 2);
                        ctx.fill();
                    } else {
                        ctx.fillRect(
                            -piece.size / 2,
                            -piece.size / 2,
                            piece.size,
                            piece.size / 2,
                        );
                    }

                    ctx.restore();

                    // Reset piece if it falls off screen
                    if (piece.y > confettiCanvas.height + 20) {
                        confettiPieces[index].y = -20;
                        confettiPieces[index].x =
                            Math.random() * confettiCanvas.width;
                    }
                });

                animationId = requestAnimationFrame(animateConfetti);
            }

            // ===== Hearts Rain =====
            function startHeartsRain() {
                heartsRain.classList.add("active");
                const hearts = ["üíï", "üíó", "üíñ", "üíì", "‚ù§Ô∏è", "üíò"];

                function createRainHeart() {
                    const heart = document.createElement("div");
                    heart.className = "rain-heart";
                    heart.textContent =
                        hearts[Math.floor(Math.random() * hearts.length)];
                    heart.style.left = Math.random() * 100 + "vw";
                    heart.style.animationDuration = 3 + Math.random() * 4 + "s";
                    heart.style.fontSize = 1 + Math.random() * 2 + "rem";
                    heartsRain.appendChild(heart);

                    setTimeout(() => {
                        heart.remove();
                    }, 7000);
                }

                // Initial burst
                for (let i = 0; i < 20; i++) {
                    setTimeout(createRainHeart, i * 100);
                }

                // Continuous rain
                setInterval(createRainHeart, 300);
            }

            // ===== Shake Animation =====
            const shakeKeyframes = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-5px) rotate(-2deg); }
                75% { transform: translateX(5px) rotate(2deg); }
            }
        `;
            const styleSheet = document.createElement("style");
            styleSheet.textContent = shakeKeyframes;
            document.head.appendChild(styleSheet);

            // ===== Handle Window Resize =====
            window.addEventListener("resize", () => {
                confettiCanvas.width = window.innerWidth;
                confettiCanvas.height = window.innerHeight;
            });

            // ===== Initialize =====
            createFloatingHearts();
        </script>
    </body>
</html>
